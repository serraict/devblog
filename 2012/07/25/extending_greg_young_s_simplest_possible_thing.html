<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="My blog">
        <meta name="viewport" content="width=device-width">
        <title>Extending Greg Young’s Simplest Possible Thing &mdash; Serra&#39;s Blog ^^</title>
            <link rel="stylesheet" href="../../../_static/normalize.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/sphinx.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/main.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/modern5.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="../../../_static/font-awesome.min.css" type="text/css">
        <link rel="stylesheet" href="../../../_static/serra.css" type="text/css" /><link rel="shortcut icon" href="../../../_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="../../../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../../../_static/plugins.js"></script>
        <script src="../../../_static/main.js"></script>
        <link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="CQRS Resources" href="../20/cqrs_resources.html" /><link rel="prev" title="Command Validation" href="../27/command_validation.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../../../_static/underscore.js"></script><script type="text/javascript" src="../../../_static/doctools.js"></script><script type="text/javascript" src="../../../_static/disqus.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Adjusts document height if sidebar is taller
            var documentwrapper = document.getElementsByTagName("article")[0];
            var sidebar = document.getElementsByClassName("sidebar")[0];

            if (sidebar.offsetHeight > documentwrapper.offsetHeight)
            {
                var mainwrapper = document.getElementsByClassName("main")[0];
                documentwrapper.style.minHeight = mainwrapper.offsetHeight + "px";
            }

            // Scroll to content if on small screen
            if (screen.width < 480)
            {
                $(document).scrollTop(document.getElementsByTagName("article")[0].offsetTop - 44);
            }
        });
    </script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><header role="banner">
            <hgroup>
              <h1><a href="../../../index.html">Serra&#39;s Blog ^^</a></h1><h2>Learning while developing software</h2></hgroup>
          </header>
      <nav role="navigation">
            <ul><li class="quicklink"><div class="rss">
        <a href="../../../rss.html" title="Subscribe via RSS"><span class="fa fa-lg fa-rss"></span></a>
    </div></li><li class="main-nav">
                  <a href="../../../index.html">Home</a>
                </li>
              <li class="main-nav">
                  <a href="../../../pages/bio.html">Bio</a>
                </li>
              <li class="main-nav">
                  <a href="../../../pages/contact.html">Contact</a>
                </li>
              </ul>
          </nav><div class="main-container" role="main"><div class="main wrapper body clearfix"><article role="article"><ul class="related clearfix">
            <li class="left"> &laquo; <a href="../27/command_validation.html">Command Validation</a></li>
            <li class="right"><a href="../20/cqrs_resources.html">CQRS Resources</a> &raquo; </li>
        </ul><div class="timestamp postmeta">
            <span>July 25, 2012</span>
        </div>
    <div class="section" id="extending-greg-young-s-simplest-possible-thing">
<span id="id1"></span><h1>Extending Greg Young’s Simplest Possible Thing</h1>
<p>As part of my process learning CQRS,
I thought it would be interesting to extend
<a class="reference internal" href="../20/cqrs_resources.html#cqrs-examples"><span class="std std-ref">one of the existing examples</span></a>
with some new behavior.
I decided to start with
<a class="reference external" href="http://github.com/gregoryyoung/m-r">The Simplest Possible Thing</a>,
an example application by Greg Young.
Simple it is - if you accept Lines of Code as a metric for simplicity:
the total solutions has about 900 non-blank lines
(includes braces and comments).
It doesn’t do much either; it allows users to:</p>
<blockquote>
<div><ul class="simple">
<li>create inventory items</li>
<li>rename inventory items</li>
<li>check in a number of items</li>
<li>remove a number of items</li>
</ul>
</div></blockquote>
<p>Primary goal for me was to
“get better acquainted with the CQRS way of doing things”.
I tried to make that goal a bit smarter,
by making up a couple of new requirements (both functional and non-functional)
and implementing them.</p>
<div id="more"> </div><p>These are the requirements I came up with thus far:</p>
<p>New functional requirements:</p>
<blockquote>
<div><ul class="simple">
<li>As a user, I should get a warning
when I try to remove more items than are currently in stock.</li>
<li>As a user, I should get a warning
when I try to remove or add a negative number of items.</li>
<li>As a user I should <em>not</em> be able
to remove more items from inventory than are currently in stock.</li>
<li>As a user, I want to receive a notification
when an inventory item’s count falls below a certain threshold value.</li>
</ul>
</div></blockquote>
<p>Non functional requirements:</p>
<blockquote>
<div><ul class="simple">
<li>There are no unit tests.
From now on, unit tests are required when introducing new features!</li>
<li>The system does not persists domain state:
all information is lost when the MVC application is unloaded by IIS.
Use <a class="reference external" href="https://github.com/joliver/EventStore">Oliver’s EventStore</a>
to persist domain state by persisting events.</li>
<li>Our customers want a WPF rich client instead of this web interface.
To prepare for this change, implement
an application service that hosts the domain model,
and connect to the existing MVC front end using an open source service bus.</li>
<li>Persist the read model in RavenDB,
so that we can easily distribute the read model
across nodes on our site.</li>
</ul>
</div></blockquote>
<p>I’ll post how I implemented the requirements.
If I think of more requirements, I’ll list them here.
I forked <a class="reference external" href="https://github.com/serraict/m-r">the repo on Github</a>
and will apply my changes there.</p>
</div>

    <div class="postmeta">
        <div class="author">
            <span>Posted by Marijn van der Zee</span>
        </div>
        
        <div class="tags">
            <span>
                Tags:
                <a href="../../../tags/cqrs.html">CQRS</a></span>
        </div>
        </div>
    <div id="disqus_thread"></div><script type="text/javascript">    var disqus_shortname = "serraongithub";    var disqus_identifier = "2012/07/25/extending_greg_young_s_simplest_possible_thing";    disqus_thread();</script><noscript>Please enable JavaScript to view the    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><ul class="related clearfix">
            <li class="left"> &laquo; <a href="../27/command_validation.html">Command Validation</a></li>
            <li class="right"><a href="../20/cqrs_resources.html">CQRS Resources</a> &raquo; </li>
        </ul></article><aside class="sidebar"><section><div class="widget">
    <h1>Recent Posts</h1>
    <ul><li>
            <a href="../../../2013/08/28/setting-up-rhino-servicebus-with-rhinoqueues.html">Setting up Rhino Servicebus with Rhinoqueues</a>
        </li><li>
            <a href="../../../2013/03/27/passing_build_properties_to_psake_cmd.html">Passing build properties to psake.cmd</a>
        </li><li>
            <a href="../../../2013/03/04/custom_editor_using_twitter_bootstrap_mvc4.html">Custom editor using Twitter.Bootstrap.Mvc4</a>
        </li><li>
            <a href="../../12/10/my_books.html">My Readings …</a>
        </li><li>
            <a href="../../11/02/continuous_integration_with_jenkis__git_and_psake.html">Continuous Integration with Jenkins, git and psake</a>
        </li><li>
            <a href="../../08/01/adding_mongodb_event_store.html">Adding a persistent event store</a>
        </li><li>
            <a href="../30/protecting_entity_invariants.html">Protecting Entity Invariants</a>
        </li><li>
            <a href="../27/command_validation.html">Command Validation</a>
        </li><li>
            <a href="#">Extending Greg Young’s Simplest Possible Thing</a>
        </li><li>
            <a href="../20/cqrs_resources.html">CQRS Resources</a>
        </li></ul>
</div>
</section><section><div class="widget" id="searchbox" role="search">
    <h1><a href="#searchbox">Search</a></h1>
    <form action="../../../search.html" method="get">
        <input type="text" name="q" />
        <button type="submit"><span class="fa fa-search"></span></button>
    </form>
</div></section></aside></div> <!-- #main --></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo"><footer class="wrapper">&copy; Copyright 2010, 2011, 2012 Marijn van der Zee. Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.</footer></div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>